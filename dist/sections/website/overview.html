<!-- Website Overview Tab - Mobile First Design -->
<div id="website-overview" class="tab-content active" data-section="website_info">
    <div class="stats-grid">
        <!-- Website Status Card -->
        <div class="stat-card">
            <div class="stat-header">
                <h3>Website Status</h3>
                <span class="status-indicator" id="website-status">Active</span>
            </div>
            <div class="stat-content">
                <div class="metric">
                    <span class="metric-label">URL</span>
                    <span class="metric-value" data-field="website_url" data-table="website_info">Loading...</span>
                </div>
                <div class="metric">
                    <span class="metric-label">Last Updated</span>
                    <span class="metric-value" data-field="last_updated" data-table="website_info">--</span>
                </div>
            </div>
        </div>

        <!-- Traffic Overview Card -->
        <div class="stat-card">
            <div class="stat-header">
                <h3>Traffic Overview</h3>
                <span class="time-period">Last 30 days</span>
            </div>
            <div class="stat-content">
                <div class="metric">
                    <span class="metric-label">Visitors</span>
                    <span class="metric-value" data-field="monthly_visitors" data-table="website_analytics">--</span>
                </div>
                <div class="metric">
                    <span class="metric-label">Page Views</span>
                    <span class="metric-value" data-field="monthly_pageviews" data-table="website_analytics">--</span>
                </div>
            </div>
        </div>

        <!-- SEO Score Card -->
        <div class="stat-card">
            <div class="stat-header">
                <h3>SEO Score</h3>
                <button class="btn-icon" onclick="refreshSeoScore()">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M23 4v6h-6M1 20v-6h6M3.51 9a9 9 0 0114.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0020.49 15"/>
                    </svg>
                </button>
            </div>
            <div class="stat-content">
                <div class="score-display">
                    <div class="score-circle" data-score="0">
                        <span class="score-value" data-field="seo_score" data-table="website_analytics">--</span>
                    </div>
                    <div class="score-details">
                        <div class="score-item">
                            <span class="score-label">Technical SEO</span>
                            <span class="score-small" data-field="technical_seo_score" data-table="website_analytics">--</span>
                        </div>
                        <div class="score-item">
                            <span class="score-label">Content Quality</span>
                            <span class="score-small" data-field="content_score" data-table="website_analytics">--</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Backlinks Card -->
        <div class="stat-card">
            <div class="stat-header">
                <h3>Backlinks</h3>
                <a href="#" class="link-text" onclick="showWebsiteTab('backlinks')">View All</a>
            </div>
            <div class="stat-content">
                <div class="metric">
                    <span class="metric-label">Total Backlinks</span>
                    <span class="metric-value" data-field="total_backlinks" data-table="website_analytics">--</span>
                </div>
                <div class="metric">
                    <span class="metric-label">Referring Domains</span>
                    <span class="metric-value" data-field="referring_domains" data-table="website_analytics">--</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Website Details Section -->
    <div class="section-card">
        <div class="card-header">
            <h2>Website Details</h2>
            <button class="btn-secondary edit-button" onclick="toggleWebsiteEditMode('website_info')">Edit</button>
        </div>
        
        <div class="mobile-form-container">
            <div class="form-group">
                <label>Primary Domain</label>
                <div class="field-value" data-field="primary_domain" data-table="website_info"></div>
            </div>
            
            <div class="form-group">
                <label>Website Platform</label>
                <div class="field-value" data-field="platform" data-table="website_info"></div>
            </div>
            
            <div class="form-group">
                <label>SSL Certificate</label>
                <div class="field-value" data-field="ssl_status" data-table="website_info"></div>
            </div>
            
            <div class="form-group">
                <label>Mobile Responsive</label>
                <div class="field-value" data-field="mobile_responsive" data-table="website_info"></div>
            </div>
            
            <div class="form-group">
                <label>Analytics ID</label>
                <div class="field-value" data-field="analytics_id" data-table="website_info"></div>
            </div>
            
            <div class="form-group">
                <label>Sitemap URL</label>
                <div class="field-value" data-field="sitemap_url" data-table="website_info"></div>
            </div>
        </div>
    </div>

    <!-- Quick Actions -->
    <div class="quick-actions">
        <h3>Quick Actions</h3>
        <div class="action-grid">
            <button class="action-button" onclick="runWebsiteAudit()">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/>
                </svg>
                <span>Run Website Audit</span>
            </button>
            <button class="action-button" onclick="submitToSearchEngines()">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="16"/><line x1="8" y1="12" x2="16" y2="12"/>
                </svg>
                <span>Submit to Search Engines</span>
            </button>
            <button class="action-button" onclick="generateSitemap()">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="6" y1="3" x2="6" y2="15"/><circle cx="18" cy="6" r="3"/><circle cx="6" cy="18" r="3"/><path d="M18 9a9 9 0 01-9 9"/>
                </svg>
                <span>Generate Sitemap</span>
            </button>
            <button class="action-button" onclick="checkBrokenLinks()">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/>
                </svg>
                <span>Check Broken Links</span>
            </button>
        </div>
    </div>
</div>

<!-- Load the website overview module -->
<script src="js/tabs/website-overview.js"></script>

<script>
// Quick action functions
function runWebsiteAudit() {
    if (window.showNotification) {
        window.showNotification('Website audit started. This may take a few minutes.', 'info');
    }
    setTimeout(() => {
        if (window.showNotification) {
            window.showNotification('Website audit completed. Check the SEO Metrics tab for results.', 'success');
        }
    }, 3000);
}

function submitToSearchEngines() {
    if (window.showNotification) {
        window.showNotification('Submitting website to search engines...', 'info');
    }
    setTimeout(() => {
        if (window.showNotification) {
            window.showNotification('Website submitted to Google and Bing successfully', 'success');
        }
    }, 2000);
}

function generateSitemap() {
    if (window.showNotification) {
        window.showNotification('Generating sitemap...', 'info');
    }
    setTimeout(() => {
        if (window.showNotification) {
            window.showNotification('Sitemap generated successfully', 'success');
        }
    }, 2000);
}

function checkBrokenLinks() {
    if (window.showNotification) {
        window.showNotification('Checking for broken links...', 'info');
    }
    setTimeout(() => {
        if (window.showNotification) {
            window.showNotification('Link check complete. No broken links found!', 'success');
        }
    }, 3000);
}

function refreshSeoScore() {
    const button = event.target.closest('button');
    button.disabled = true;
    
    // Simulate score refresh
    const newScore = Math.floor(Math.random() * 30) + 70;
    const scoreElement = document.querySelector('[data-field="seo_score"]');
    if (scoreElement) {
        scoreElement.textContent = newScore;
        updateScoreDisplay(newScore);
    }
    
    if (window.showNotification) {
        window.showNotification('SEO score updated', 'success');
    }
    
    setTimeout(() => {
        button.disabled = false;
    }, 2000);
}

// Load website overview data when tab is shown
(function() {
    console.log('Website overview tab loaded');
    
    // Load website data after a short delay
    setTimeout(() => {
        if (window.loadWebsiteOverview) {
            window.loadWebsiteOverview();
        } else {
            console.log('Waiting for loadWebsiteOverview function...');
            // Try again after module loads
            setTimeout(() => {
                if (window.loadWebsiteOverview) {
                    window.loadWebsiteOverview();
                }
            }, 500);
        }
    }, 100);
})();
</script>

<style>
/* Stats Grid - Mobile First */
.stats-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 1rem;
    margin-bottom: 2rem;
}

.stat-card {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 1.5rem;
}

.stat-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1rem;
}

.stat-header h3 {
    font-size: 1rem;
    font-weight: 600;
    margin: 0;
}

.status-indicator {
    display: inline-flex;
    align-items: center;
    padding: 0.25rem 0.75rem;
    background: var(--success-light);
    color: var(--success);
    border-radius: 20px;
    font-size: 0.75rem;
    font-weight: 500;
}

.time-period {
    font-size: 0.75rem;
    color: var(--text-muted);
}

.stat-content {
    display: flex;
    flex-direction: column;
    gap: 1rem;
}

.metric {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.metric-label {
    font-size: 0.875rem;
    color: var(--text-secondary);
}

.metric-value {
    font-size: 1.25rem;
    font-weight: 600;
    color: var(--text-primary);
}

/* Score Display */
.score-display {
    display: flex;
    align-items: center;
    gap: 1.5rem;
}

.score-circle {
    position: relative;
    width: 80px;
    height: 80px;
    border-radius: 50%;
    background: conic-gradient(
        var(--primary) 0deg,
        var(--primary) calc(var(--score, 0) * 3.6deg),
        var(--border) calc(var(--score, 0) * 3.6deg),
        var(--border) 360deg
    );
    display: flex;
    align-items: center;
    justify-content: center;
}

.score-circle::before {
    content: '';
    position: absolute;
    width: 70px;
    height: 70px;
    background: var(--surface);
    border-radius: 50%;
}

.score-value {
    position: relative;
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--primary);
}

.score-details {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
}

.score-item {
    display: flex;
    justify-content: space-between;
    gap: 1rem;
}

.score-label {
    font-size: 0.75rem;
    color: var(--text-secondary);
}

.score-small {
    font-size: 0.875rem;
    font-weight: 600;
    color: var(--text-primary);
}

/* Quick Actions */
.quick-actions {
    margin-top: 2rem;
}

.quick-actions h3 {
    font-size: 1.25rem;
    margin-bottom: 1rem;
}

.action-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 1rem;
}

.action-button {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.5rem;
    padding: 1rem;
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.2s;
    text-align: center;
}

.action-button:hover {
    border-color: var(--primary);
    background: var(--primary-light);
}

.action-button svg {
    color: var(--primary);
}

.action-button span {
    font-size: 0.75rem;
    color: var(--text-secondary);
}

/* Mobile form container styles */
.mobile-form-container {
    display: flex;
    flex-direction: column;
    gap: 1rem;
}

.form-group {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
}

.form-group label {
    font-weight: 500;
    color: var(--text-secondary);
    font-size: 0.875rem;
}

.field-value {
    padding: 0.75rem;
    background: var(--background);
    border: 1px solid var(--border);
    border-radius: 6px;
    min-height: 44px;
    transition: all 0.2s;
    display: flex;
    align-items: center;
    color: var(--text-primary);
    font-size: 0.875rem;
}

.field-value:empty::before {
    content: 'Not set';
    color: var(--text-muted);
    font-style: italic;
}

.field-value[contenteditable="true"] {
    background: var(--surface);
    border-color: var(--primary);
    outline: none;
    cursor: text;
}

/* Button styles */
.btn-icon {
    background: none;
    border: none;
    cursor: pointer;
    padding: 0.5rem;
    border-radius: 4px;
    transition: background 0.2s;
}

.btn-icon:hover {
    background: var(--primary-light);
}

.btn-secondary {
    background: var(--surface);
    color: var(--text-primary);
    border: 1px solid var(--border);
    padding: 0.5rem 1rem;
    border-radius: 6px;
    cursor: pointer;
    font-size: 0.875rem;
    transition: all 0.2s;
}

.btn-secondary:hover {
    background: var(--primary-light);
    border-color: var(--primary);
}

.btn-primary {
    background: var(--primary);
    color: white;
    border: none;
    padding: 0.5rem 1rem;
    border-radius: 6px;
    cursor: pointer;
    font-size: 0.875rem;
    transition: all 0.2s;
}

.btn-primary:hover {
    background: var(--primary-dark);
}

/* Section card */
.section-card {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 1.5rem;
    margin-top: 2rem;
}

.card-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1.5rem;
}

.card-header h2 {
    font-size: 1.25rem;
    margin: 0;
}

/* Tablet and Desktop Responsive */
@media (min-width: 576px) {
    .stats-grid {
        grid-template-columns: repeat(2, 1fr);
    }
    
    .action-grid {
        grid-template-columns: repeat(2, 1fr);
    }
}

@media (min-width: 768px) {
    .stats-grid {
        grid-template-columns: repeat(4, 1fr);
        gap: 1.5rem;
    }
    
    .action-grid {
        grid-template-columns: repeat(4, 1fr);
    }
    
    .mobile-form-container {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 1.5rem;
    }
}

@media (min-width: 1024px) {
    .mobile-form-container {
        grid-template-columns: repeat(3, 1fr);
        gap: 2rem;
    }
}
</style>
